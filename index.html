<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Job Application Form - Assignment 12</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; }
        .error { color: red; font-size: 0.9em; margin-left: 10px; }
        textarea { width: 100%; height: 200px; margin-top: 10px; }
    </style>
</head>
<body>

    <h1>Job Application Form</h1>

    <form id="jobForm">
        <div class="form-group">
            <label for="tckn">TCKN:</label>
            <input type="text" id="tckn">
            <span id="tcknError" class="error"></span>
        </div>

        <div class="form-group">
            <label for="fullname">Full Name:</label>
            <input type="text" id="fullname">
            <span id="fullnameError" class="error"></span>
        </div>

        <div class="form-group">
            <label for="dob">Date of Birth:</label>
            <input type="date" id="dob">
            <span id="dobError" class="error"></span>
        </div>

        <div class="form-group">
            <label>Gender:</label>
            <input type="radio" name="gender" value="Male" checked> Male
            <input type="radio" name="gender" value="Female"> Female
        </div>

        <div class="form-group">
            <label>Skills:</label>
            <input type="checkbox" name="skills" value="HTML"> HTML
            <input type="checkbox" name="skills" value="CSS"> CSS
            <input type="checkbox" name="skills" value="JavaScript"> JavaScript
        </div>

        <div class="form-group">
            <label for="salary">Salary Expectation:</label>
            <input type="number" id="salary">
            <span id="salaryError" class="error"></span>
        </div>

        <div class="form-group">
            <label for="experience">Years of Experience:</label>
            <input type="number" id="experience">
            <span id="experienceError" class="error"></span>
        </div>

        <button type="submit">Submit Application</button>
    </form>

    <h3>Application Preview</h3>
    <textarea id="previewBox" readonly></textarea>

    <script src="TCKN_validation.js"></script>
    <script src="FullName_validation.js"></script>
    <script src="DOB_validation.js"></script>
    <script src="Salary_validation.js"></script>
    <script src="Experience_validation.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            
            document.getElementById("tckn").addEventListener("blur", validateTCKN);
            document.getElementById("fullname").addEventListener("blur", validateFullName);
            document.getElementById("dob").addEventListener("blur", validateDOB);
            document.getElementById("salary").addEventListener("blur", validateSalary);
            document.getElementById("experience").addEventListener("blur", validateExperience);

            document.getElementById("jobForm").addEventListener("submit", function(event) {
                event.preventDefault();

                var isTcknValid = validateTCKN();
                var isNameValid = validateFullName();
                var isDobValid = validateDOB();
                var isSalaryValid = validateSalary();
                var isExpValid = validateExperience();

                var previewBox = document.getElementById("previewBox");

                if (isTcknValid && isNameValid && isDobValid && isSalaryValid && isExpValid) {
                    alert("Application accepted"); 
                    
                    var tckn = document.getElementById("tckn").value;
                    var name = document.getElementById("fullname").value;
                    var age = getAgeValue();
                    var salary = document.getElementById("salary").value;
                    var exp = document.getElementById("experience").value;
                    
                    var gender = document.querySelector('input[name="gender"]:checked').value;

                    var skills = [];
                    document.querySelectorAll('input[name="skills"]:checked').forEach(function(el) {
                        skills.push(el.value);
                    });
                    var skillsStr = skills.length > 0 ? skills.join(", ") : "None";

                    var summary = "TCKN: " + tckn + "\n" +
                                  "Full Name: " + name + "\n" +
                                  "Date of Birth: " + document.getElementById("dob").value + "\n" +
                                  "Age: " + age + "\n" +
                                  "Gender: " + gender + "\n" +
                                  "Skills: " + skillsStr + "\n" +
                                  "Salary: " + salary + "\n" +
                                  "Experience: " + exp;
                    
                    previewBox.value = summary;

                } else {
                    previewBox.value = ""; 
                    
                    if (!isTcknValid) document.getElementById("tckn").focus();
                    else if (!isNameValid) document.getElementById("fullname").focus();
                    else if (!isDobValid) document.getElementById("dob").focus();
                    else if (!isSalaryValid) document.getElementById("salary").focus();
                    else if (!isExpValid) document.getElementById("experience").focus();
                }
            });
        });
    </script>
</body>
</html>
